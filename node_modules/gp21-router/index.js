!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["sme-router"]=e():t["sme-router"]=e()}(this,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(t,e,r){"use strict";var n=r(6),i=r(7);e.a=class{constructor(t){this.matcher=t.matcher,this._matchedCount=0}_fireHandlers(t,e){for(let r=0;r<t.length;r++){const n=t[r],s=this._getCache(n),o={body:e||s,query:n.query,params:n.params};Object(i.a)(o,"route",n.path),Object(i.a)(o,"url",n.url),!e&&s&&(o._id=n._id),n.handler(o),this._cacheBody(e,n)}}_getCache(t){return Object(n.a)(t._id)}_cacheBody(t,e){t&&Object(n.b)(e._id,t)}getMatchedCount(){return this._matchedCount}go(t,e){}redirect(t,e){}back(){}stop(){}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(5),s=r(8);e.default=class{constructor(t,e="hash"){if(this._mount=document.getElementById(t),!this._mount)throw new Error(`Can not get mount point document.getElementById(#${t})...`);this._subRouteView='<div id="__sub-route-view"></div>',this._subMount=null,this._isPassing=!1,this._cache={},this._middlewares=[],this._matcher=new n.a,this._history="hash"===e?new s.a({matcher:this._matcher}):new i.a({matcher:this._matcher})}render(t){this._isPassing?this._subMount.innerHTML=t:this._mount.innerHTML=t}next(t){t&&(this._mount.innerHTML=t),this._isPassing=this._history.getMatchedCount()>1,this._subMount=document.querySelector("#__sub-route-view")}subRoute(){return this._subRouteView}use(t){this._middlewares.push(t)}route(t,e){this._matcher.add(t,r=>{if("*"!==t&&!r._id)for(let t=0;t<this._middlewares.length;t++)this._middlewares[t](r);e(r,this,this.next.bind(this))})}go(t,e){this._isPassing=!1,this._history.go(t,e)}redirect(t,e){this._isPassing=!1,this._history.redirect(t,e)}back(){this._isPassing=!1,this._history.back()}stop(){this._history.stop()}}},function(t,e,r){"use strict";var n=r(3),i=r.n(n),s=r(4);e.a=class{constructor(){this._routes=[],this._id=0}match(t){let e=[],r="",n=t.indexOf("?"),i=!0;n>-1&&(r=t.substr(n),t=t.slice(0,n));for(let n=0;n<this._routes.length;n++){let o=this._routes[n],a=o.reg.exec(t);if(a){if("*"!==o.path&&(i=!1),!i&&"*"===o.path)continue;e.push({_id:o._id,path:o.path,url:t+r,params:this._getParams(o.params,a),query:Object(s.a)(r),handler:o.handler})}}return e}add(t,e){let r=this._toReg({path:t,handler:e});r._id=++this._id,this._routes.push(r)}_toReg(t){return t.params=[],t.reg="*"===t.path?/[\w\W]*/i:i()(t.path,t.params,{end:!1}),t}_getParams(t=[],e){let r={};for(let n=0;n<t.length;n++)r[t[n].name]=e[n+1];return r}}},function(t,e){t.exports=c,t.exports.parse=n,t.exports.compile=function(t,e){return i(n(t,e))},t.exports.tokensToFunction=i,t.exports.tokensToRegExp=h;var r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function n(t,e){for(var n,i=[],a=0,h=0,c="",u=e&&e.delimiter||"/",l=e&&e.delimiters||"./",p=!1;null!==(n=r.exec(t));){var d=n[0],f=n[1],_=n.index;if(c+=t.slice(h,_),h=_+d.length,f)c+=f[1],p=!0;else{var m="",g=t[h],w=n[2],y=n[3],v=n[4],b=n[5];if(!p&&c.length){var x=c.length-1;l.indexOf(c[x])>-1&&(m=c[x],c=c.slice(0,x))}c&&(i.push(c),c="",p=!1);var E=""!==m&&void 0!==g&&g!==m,$="+"===b||"*"===b,j="?"===b||"*"===b,O=m||u,R=y||v;i.push({name:w||a++,prefix:m,delimiter:O,optional:j,repeat:$,partial:E,pattern:R?o(R):"[^"+s(O)+"]+?"})}}return(c||h<t.length)&&i.push(c+t.substr(h)),i}function i(t){for(var e=new Array(t.length),r=0;r<t.length;r++)"object"==typeof t[r]&&(e[r]=new RegExp("^(?:"+t[r].pattern+")$"));return function(r,n){for(var i="",s=n&&n.encode||encodeURIComponent,o=0;o<t.length;o++){var a=t[o];if("string"!=typeof a){var h,c=r?r[a.name]:void 0;if(Array.isArray(c)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===c.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<c.length;u++){if(h=s(c[u]),!e[o].test(h))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');i+=(0===u?a.prefix:a.delimiter)+h}}else if("string"!=typeof c&&"number"!=typeof c&&"boolean"!=typeof c){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"));a.partial&&(i+=a.prefix)}else{if(h=s(String(c)),!e[o].test(h))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+h+'"');i+=a.prefix+h}}else i+=a}return i}}function s(t){return t.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1")}function o(t){return t.replace(/([=!:$/()])/g,"\\$1")}function a(t){return t&&t.sensitive?"":"i"}function h(t,e,r){for(var n=(r=r||{}).strict,i=!1!==r.end,o=s(r.delimiter||"/"),h=[].concat(r.endsWith||[]).map(s).concat("$").join("|"),c="",u=0;u<t.length;u++){var l=t[u];if("string"==typeof l)c+=s(l);else{var p=s(l.prefix),d="(?:"+l.pattern+")";e&&e.push(l),l.repeat&&(d+="(?:"+p+d+")*"),c+=d=l.optional?l.partial?p+"("+d+")?":"(?:"+p+"("+d+"))?":p+"("+d+")"}}return n||(c+="(?:"+o+"(?="+h+"))?"),c+=i?"$"===h?h:"(?="+h+")":"(?="+o+"|"+h+")",new RegExp("^"+c,a(r))}function c(t,e,r){return t instanceof RegExp?function(t,e){if(!e)return t;var r=t.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)e.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,pattern:null});return t}(t,e):Array.isArray(t)?function(t,e,r){for(var n=[],i=0;i<t.length;i++)n.push(c(t[i],e,r).source);return new RegExp("(?:"+n.join("|")+")",a(r))}(t,e,r):function(t,e,r){return h(n(t,r),e,r)}(t,e,r)}},function(t,e,r){"use strict";e.a=function(t){let e={};if(!(t=t.trim().replace(/^(\?|#|&)/,"")))return null;return t.split("&").forEach(t=>{const[r,n]=t.split("="),[i,s]=[decodeURIComponent(r),n?decodeURIComponent(n):null];e[i]=s}),e}},function(t,e,r){"use strict";var n=r(0);e.a=class extends n.a{constructor(t){super(t),this._init(),window.addEventListener("load",this._listen),window.addEventListener("popstate",this._listen)}_init(){this._listen=(t=>{const e=`${location.pathname}${location.search}`,r=this.matcher.match(e);this._matchedCount=r.length,this._fireHandlers(r,t.state)})}_routeTo(t,e){const r=this.matcher.match(t);this._matchedCount=r.length,this._fireHandlers(r,e)}go(t,e){history.pushState(e,"",t),this._routeTo(t,e)}redirect(t,e){history.replaceState(e,"",t),this._routeTo(t,e)}back(){history.go(-1)}stop(){window.removeEventListener("load",this._listen),window.removeEventListener("popstate",this._listen)}}},function(t,e,r){"use strict";e.b=function(t,e){if(!e)return;n.setItem(`${i}${t}`,JSON.stringify(e))},e.a=function(t){try{const e=n.getItem(`${i}${t}`);return e?JSON.parse(e):null}catch(t){throw new Error("parse body err")}};const n=sessionStorage,i="smer"},function(t,e,r){"use strict";e.a=function(t,e,r){Object.defineProperty(t,e,{writable:!1,enumerable:!0,value:r})}},function(t,e,r){"use strict";var n=r(0);e.a=class extends n.a{constructor(t){super(t),this._cache={},this._init(),window.addEventListener("load",this._listen),window.addEventListener("hashchange",this._listen)}_getHash(){return location.hash.slice(1)}_init(){this._listen=(t=>{const e=this._getHash(),r=this.matcher.match(e);this._matchedCount=r.length,this._fireHandlers(r,this._cache[e])})}go(t,e){this._cache[t]=e,location.hash=`${t}`}redirect(t,e){const r=location.href,n=r.indexOf("#");t=n>0?`${r.slice(0,n)}#${t}`:`${r.slice(0,0)}#${t}`,this._cache[t]=e,location.replace(t)}back(){history.go(-1)}stop(){window.removeEventListener("load",this._listen),window.removeEventListener("hashchange",this._listen)}}}])});